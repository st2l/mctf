import{_ as oe,r as u,c as ie,o as le,a,b as n,d as e,t as i,u as G,e as ae,F as P,f as z,w as B,v as _e,g as y,h as k,n as D,s as c,i as U,j as re,k as A,l as de,m as ce,p as ue,q as ve,x as me,y as pe}from"./main-374fbc51.js";import{b as J,p as O,a as he}from"./api-866f5b6f.js";const ye={class:"buyer-dashboard"},be={class:"dashboard-header"},ge={class:"user-info"},ke={class:"welcome"},$e={class:"stats"},we={class:"stat-item"},Re={class:"stat-value"},Ce={class:"stat-item"},De={class:"stat-value"},Fe={class:"dashboard-content"},Qe={class:"tabs"},Me=["onClick"],Se={key:0,class:"badge"},xe={class:"tab-content"},Be={key:0,class:"receipts-section"},Ue={class:"filters"},Ie={class:"receipts-list"},Te={key:0,class:"empty-state"},qe={class:"receipt-header"},Pe={class:"receipt-info"},ze={class:"receipt-id"},Le={class:"receipt-meta"},Ee={class:"datetime"},Ve={class:"store"},Ae={class:"receipt-items"},Oe={class:"items-list"},je={class:"item-name"},Ne={class:"item-details"},Xe={class:"item-sum"},Ge={class:"receipt-footer"},We={class:"total"},He={class:"total-amount"},Ye={class:"total-amount"},Je={class:"receipt-actions"},Ke=["onClick"],Ze={key:1,class:"upload-section"},es={class:"upload-container"},ss={key:0,class:"upload-placeholder"},ts={key:1,class:"file-preview"},os={class:"file-info"},ls={class:"file-name"},as={class:"file-size"},ns={class:"upload-actions"},is=["disabled"],rs={key:0},ds={key:1},cs={key:2,class:"failed-qrs-section"},us={key:0,class:"empty-state success"},vs={key:1,class:"failed-list"},ps={class:"failed-info"},_s={class:"failed-header"},fs={class:"qr-meta"},ms={class:"qr-id"},hs={class:"failed-actions"},ys=["onClick"],bs={__name:"BuyerDashboard",setup(ne){const j=[{id:"receipts",label:"My receipts"},{id:"upload_qr",label:"Upload QR"},{id:"failed_qrs",label:"Failed QR"}],f=u("receipts"),p=u([]),g=u([]),m=u("all"),R=u([]),_=u(null),C=u(!1),$=u(!1),M=u(null),v=u(null),F=u(null),S=ie(()=>p.value.length),N=ie(()=>p.value.reduce((o,t)=>o+t.cashback_amount,0)),b=async()=>{try{const o=await J.getReceipts();p.value=o,g.value=o}catch(o){c("Error loading receipts","error"),console.log(o)}},L=()=>{let o=p.value;m.value!=="all"&&(o=o.filter(t=>t.status==m.value)),g.value=o},I=o=>({0:"Inprogress",1:"Complete",2:"Failed"})[o]||o,T=o=>new Date(o).toLocaleString("ru-RU"),q=o=>(o=o/100,o.toLocaleString("ru-RU")),X=o=>q(o.reduce((t,r)=>t+r.sum,0)),K=o=>{const t=`
Receipt #${o.id}
Store: ${o.receipt.store.name} (inn: ${o.receipt.store.inn})
Date: ${T(o.receipt.datetime)}
Status: ${I(o.status)}

Items:
${o.receipt.items.map(V=>`- ${V.name}: ${V.quantity} Ã— ${V.price} â‚½ = ${V.sum} â‚½`).join(`
`)}

Total: ${X(o.receipt.items)} â‚½ (Cashback ${o.cashback_amount})
`,r=new Blob([t],{type:"text/plain"}),h=window.URL.createObjectURL(r),Q=document.createElement("a");Q.href=h,Q.download=`receipt_${o.id}.txt`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),window.URL.revokeObjectURL(h),c("The receipt has been downloaded.","success")},x=async()=>{try{R.value=await J.getFailedQRs()}catch{c("Error loading failed QR codes","error")}},Z=()=>{var o;(o=M.value)==null||o.click()},ee=o=>{var t;(t=v.value)==null||t.click(),F.value=o},W=o=>{const t=o.target.files[0];if(t){if(t.size>1024*1024){c("File is too large (max 1MB)","error");return}_.value=t}},se=o=>{C.value=!1;const t=o.dataTransfer.files[0];if(t&&t.type.startsWith("image/")){if(t.size>1*1024*1024){c("File is too large (max 1MB)","error");return}_.value=t}else c("Please upload an image","error")},H=()=>{_.value=null,M.value&&(M.value.value="")},te=o=>{if(o===0)return"0 Bytes";const t=1024,r=["Bytes","KB","MB","GB"],h=Math.floor(Math.log(o)/Math.log(t));return parseFloat((o/Math.pow(t,h)).toFixed(2))+" "+r[h]},Y=async()=>{if(_.value){$.value=!0;try{const o=await J.uploadQR(_.value);c("QR code uploaded","info"),H(),await b()}catch(o){c(o.message,"error")}finally{await x(),$.value=!1}}},E=async o=>{try{const t=o.target.files[0];await J.updateQR(F.value,t),c("Retry QR upload","info"),v.value.value="",await x(),await b()}catch(t){c(t.message,"error")}};return le(async()=>{await b(),await x()}),(o,t)=>(a(),n("div",ye,[e("div",be,[t[5]||(t[5]=e("h1",null,"Buyer's account",-1)),e("div",ge,[e("span",ke,"Welcome, "+i(G(ae))+"!",1),e("div",$e,[e("div",we,[e("span",Re,i(S.value),1),t[3]||(t[3]=e("span",{class:"stat-label"},"Total receipts",-1))]),e("div",Ce,[e("span",De,i(N.value)+" â‚½",1),t[4]||(t[4]=e("span",{class:"stat-label"},"Total cashback",-1))])])])]),e("div",Fe,[e("div",Qe,[(a(),n(P,null,z(j,r=>e("button",{key:r.id,class:D([{active:f.value===r.id},"tab-button"]),onClick:h=>f.value=r.id},[U(i(r.label)+" ",1),r.id==="failed_qrs"&&R.value.length>0?(a(),n("span",Se,i(R.value.length),1)):y("",!0)],10,Me)),64))]),e("div",xe,[f.value==="receipts"?(a(),n("div",Be,[t[12]||(t[12]=e("div",{class:"section-header"},[e("h2",null,"My receipts")],-1)),e("div",Ue,[B(e("select",{"onUpdate:modelValue":t[0]||(t[0]=r=>m.value=r),onChange:L,class:"filter-select"},[...t[6]||(t[6]=[e("option",{value:"all"},"All statuses",-1),e("option",{value:"1"},"Complete",-1),e("option",{value:"0"},"Inprogress",-1),e("option",{value:"2"},"Failed",-1)])],544),[[_e,m.value]])]),e("div",Ie,[g.value.length===0?(a(),n("div",Te," ðŸ“„ You don't have any receipts yet. ")):y("",!0),(a(!0),n(P,null,z(g.value,r=>(a(),n("div",{key:r.id,class:D(["receipt-card",`status-${r.status}`])},[e("div",qe,[e("div",Pe,[e("h3",ze,"Receipt #"+i(r.id),1),e("span",{class:D(["status-badge",`status-${r.status}`])},i(I(r.status)),3)]),e("div",Le,[e("span",Ee,i(T(r.receipt.datetime)),1),e("span",Ve,i(r.receipt.store.name)+" (inn: "+i(r.receipt.store.inn)+") ",1)])]),e("div",Ae,[t[7]||(t[7]=e("h4",null,"Items:",-1)),e("div",Oe,[(a(!0),n(P,null,z(r.receipt.items,(h,Q)=>(a(),n("div",{key:Q,class:"item-row"},[e("span",je,i(h.name),1),e("span",Ne,i(h.quantity)+" Ã— "+i(q(h.price))+" â‚½ ",1),e("span",Xe,i(q(h.sum))+" â‚½",1)]))),128))])]),e("div",Ge,[e("div",We,[t[8]||(t[8]=e("strong",null,"Total:",-1)),e("span",He,i(X(r.receipt.items))+" â‚½ ",1),t[9]||(t[9]=U(" (",-1)),t[10]||(t[10]=e("strong",null,"Cashback:",-1)),e("span",Ye,i(r.cashback_amount)+" â‚½ ",1),t[11]||(t[11]=U(") ",-1))]),e("div",Je,[e("button",{onClick:h=>K(r),class:"btn-action"}," â¬‡ï¸ Download ",8,Ke)])])],2))),128))])])):y("",!0),f.value==="upload_qr"?(a(),n("div",Ze,[t[15]||(t[15]=e("div",{class:"section-header"},[e("h2",null,"Upload QR codes"),e("p",{class:"section-description"}," Upload a photo of the QR code from your receipt for automatic processing ")],-1)),e("div",es,[e("div",{onDragover:t[1]||(t[1]=k(r=>C.value=!0,["prevent"])),onDragleave:t[2]||(t[2]=r=>C.value=!1),onDrop:k(se,["prevent"]),class:D(["upload-area",{"drag-over":C.value,"has-file":_.value}]),onClick:Z},[_.value?(a(),n("div",ts,[t[14]||(t[14]=e("div",{class:"file-icon"},"ðŸ“·",-1)),e("div",os,[e("p",ls,i(_.value.name),1),e("p",as,i(te(_.value.size)),1)]),e("button",{onClick:k(H,["stop"]),class:"remove-file"},"ðŸ—‘ï¸")])):(a(),n("div",ss,[...t[13]||(t[13]=[e("div",{class:"upload-icon"},"ðŸ“¸",-1),e("p",null,"Drag and drop a file here or click to select",-1),e("p",{class:"upload-hint"},"JPG and PNG are supported (max. 1MB)",-1)])])),e("input",{ref_key:"fileInput",ref:M,type:"file",accept:"image/*",onChange:W,class:"file-input"},null,544)],34),e("div",ns,[e("button",{onClick:Y,disabled:!_.value||$.value,class:D(["upload-btn",{loading:$.value}])},[$.value?(a(),n("span",ds,"â³ Process...")):(a(),n("span",rs,"ðŸš€ Upload QR-code"))],10,is)])])])):y("",!0),f.value==="failed_qrs"?(a(),n("div",cs,[t[16]||(t[16]=e("div",{class:"section-header"},[e("h2",null,"Failed QR-codes"),e("p",{class:"section-description"}," List of QR codes that could not be processed. ")],-1)),R.value.length===0?(a(),n("div",us," ðŸŽ‰ You have no failed QR codes! ")):(a(),n("div",vs,[(a(!0),n(P,null,z(R.value,r=>(a(),n("div",{key:r,class:"failed-item"},[e("div",ps,[e("div",_s,[e("div",fs,[e("span",ms,"ID: "+i(r),1)])])]),e("div",hs,[e("button",{onClick:h=>ee(r),class:"retry-btn"}," ðŸ”„ Upload different QR ",8,ys)])]))),128)),e("input",{ref_key:"BadQrfileInput",ref:v,type:"file",accept:"image/*",onChange:E,class:"file-input"},null,544)]))])):y("",!0)])])]))}},gs=oe(bs,[["__scopeId","data-v-e08258a7"]]);const ks={class:"partner-dashboard"},$s={class:"dashboard-header"},ws={class:"user-info"},Rs={class:"welcome"},Cs={class:"header-actions"},Ds={class:"dashboard-content"},Fs={class:"tabs"},Qs=["onClick"],Ms={key:0,class:"badge"},Ss={key:1,class:"badge"},xs={class:"tab-content"},Bs={key:0,class:"stores-section"},Us={class:"section-header"},Is={key:0,class:"empty-state"},Ts={key:1,class:"stores-grid"},qs={class:"store-header"},Ps={class:"store-name"},zs={class:"store-info"},Ls={class:"info-row"},Es={class:"value"},Vs={class:"info-row"},As={class:"value code"},Os={class:"info-row"},js={class:"value"},Ns={class:"info-row"},Xs={class:"value"},Gs={class:"info-row"},Ws={class:"value"},Hs={class:"store-actions"},Ys=["onClick"],Js={key:1,class:"documents-section"},Ks={class:"section-header"},Zs={class:"documents-list"},et={key:0,class:"empty-state"},st={class:"document-info"},tt={class:"document-header"},ot={class:"document-name"},lt={class:"document-meta"},at={class:"meta-item"},nt={class:"value"},it={class:"document-actions"},rt=["onClick"],dt={key:2,class:"qr-verify-section"},ct={class:"verify-container"},ut={class:"form-group"},vt={key:0,class:"upload-placeholder"},pt={key:1,class:"file-preview"},_t={class:"file-info"},ft={class:"file-name"},mt={class:"file-size"},ht={class:"verify-actions"},yt=["disabled"],bt={key:0},gt={key:1},kt={key:0,class:"verification-result"},$t={key:0,class:"result-details"},wt={class:"result-section"},Rt={key:1,class:"result-error"},Ct={class:"error-message"},Dt={class:"modal"},Ft={class:"modal-header"},Qt={class:"modal-body"},Mt={class:"form-group"},St={class:"form-group"},xt={class:"form-row"},Bt={class:"form-group"},Ut={class:"form-group"},It={class:"form-group"},Tt={class:"form-actions"},qt={class:"modal"},Pt={class:"modal-body"},zt={class:"form-group"},Lt={class:"form-group"},Et={key:0,class:"upload-placeholder"},Vt={key:1,class:"file-preview"},At={class:"file-info"},Ot={class:"file-name"},jt={class:"file-size"},Nt={class:"form-actions"},Xt=["disabled"],Gt={__name:"PartnerDashboard",setup(ne){const j=[{id:"stores",label:"Stores"},{id:"documents",label:"Docs"},{id:"qr_verify",label:"QR check"}],f=u("stores"),p=u([]),g=u([]),m=u(null),R=u(!1),_=u(!1),C=u(null),$=u(!1),M=u(!1),v=re({name:"",address:"",inn:"",reward_type:"",reward_rate:""}),F=u(null),S=re({title:"",content:""}),N=u(""),b=u(null),L=u(!1),I=u(null),T=u(null),q=d=>{if(!d)return"0 Bytes";const s=1024,l=["Bytes","KB","MB","GB"],w=Math.floor(Math.log(d)/Math.log(s));return parseFloat((d/Math.pow(s,w)).toFixed(2))+" "+l[w]},X=async()=>{try{p.value=await O.getStores()}catch{c("Error loading stores","error")}},K=d=>{F.value=d,Object.assign(v,{...d}),$.value=!0},x=()=>{$.value=!1,F.value=null},Z=async()=>{if(!v.name||!v.address||!v.inn||!v.reward_type||!v.reward_rate){c("Please fill in the required fields","error");return}try{F.value?(await O.updateStore(F.value.id,v),c("Store saved","success")):(await O.addStore(v),c("Store added","success")),await X(),x()}catch(d){c(d.message,"error")}},ee=d=>{K(d)},W=async()=>{try{g.value=await O.getDocuments()}catch{c("Error document loads","error")}},se=()=>{var d;(d=T.value)==null||d.click()},H=d=>{const s=d.target.files[0];if(s){if(s.size>10*1024*1024){c("The file is too large (max 1MB)","error");return}b.value=s}},te=d=>{L.value=!1;const s=d.dataTransfer.files[0];if(s){if(s.size>10*1024*1024){c("The file is too large (max 1MB)","error");return}b.value=s}},Y=()=>{b.value=null,T.value&&(T.value.value="")},E=()=>{M.value=!1,Object.assign(S,{name:"",type:"contract",description:""}),Y()},o=async()=>{if(!S.title||!b.value){c("Please fill in all required fields","error");return}try{await O.uploadDocument({title:S.title,file:b.value}),c("The document has been uploaded","success"),await W(),E()}catch(d){c(d.message,"error")}},t=d=>{const s=new Blob([atob(d.content)],{type:"text/plain"}),l=window.URL.createObjectURL(s),w=document.createElement("a");w.href=l,w.download=`${d.title}.txt`,document.body.appendChild(w),w.click(),document.body.removeChild(w),window.URL.revokeObjectURL(l)},r=()=>{var d;(d=I.value)==null||d.click()},h=d=>{const s=d.target.files[0];if(s){if(s.size>1*1024*1024){c("The file is too large (max 1MB)","error");return}if(!s.type.startsWith("image/")){c("Please upload an image","error");return}m.value=s}},Q=d=>{R.value=!1;const s=d.dataTransfer.files[0];if(s){if(s.size>1*1024*1024){c("The file is too large (max 1MB)","error");return}if(!s.type.startsWith("image/")){c("Please upload an image","error");return}m.value=s}},V=()=>{m.value=null,I.value&&(I.value.value="")},fe=async()=>{if(m.value){_.value=!0;try{C.value=await O.checkQR(m.value,N.value)}catch(d){c(d.message,"error")}finally{_.value=!1}}};return le(async()=>{await X(),await W()}),(d,s)=>(a(),n("div",ks,[e("div",$s,[s[15]||(s[15]=e("h1",null,"Partner's account",-1)),e("div",ws,[e("div",null,[e("span",Rs,"Welcome, "+i(G(ae))+"!",1)]),e("div",Cs,[e("button",{onClick:s[0]||(s[0]=l=>f.value="qr_verify"),class:"qr-verify-btn"}," ðŸ” check QR ")])])]),e("div",Ds,[e("div",Fs,[(a(),n(P,null,z(j,l=>e("button",{key:l.id,class:D([{active:f.value===l.id},"tab-button"]),onClick:w=>f.value=l.id},[U(i(l.label)+" ",1),l.id==="stores"&&p.value.length>0?(a(),n("span",Ms,i(p.value.length),1)):y("",!0),l.id==="documents"&&g.value.length>0?(a(),n("span",Ss,i(g.value.length),1)):y("",!0)],10,Qs)),64))]),e("div",xs,[f.value==="stores"?(a(),n("div",Bs,[e("div",Us,[s[16]||(s[16]=e("h2",null,"My stores",-1)),e("button",{onClick:s[1]||(s[1]=l=>$.value=!0),class:"btn-primary"}," âž• Add store ")]),p.value.length===0?(a(),n("div",Is,[s[17]||(s[17]=U(" ðŸª You don't have any stores yet. ",-1)),e("button",{onClick:s[2]||(s[2]=l=>$.value=!0),class:"btn-secondary"}," Add your first store ")])):(a(),n("div",Ts,[(a(!0),n(P,null,z(p.value,l=>(a(),n("div",{key:l.id,class:"store-card"},[e("div",qs,[e("h3",Ps,i(l.name),1),e("span",{class:D(["store-status",l.approved?"active":""])},i(l.approved?"approved":"not approved"),3)]),e("div",zs,[e("div",Ls,[s[18]||(s[18]=e("span",{class:"label"},"Address:",-1)),e("span",Es,i(l.address),1)]),e("div",Vs,[s[19]||(s[19]=e("span",{class:"label"},"ID:",-1)),e("span",As,i(l.id),1)]),e("div",Os,[s[20]||(s[20]=e("span",{class:"label"},"Inn:",-1)),e("span",js,i(l.inn),1)]),e("div",Ns,[s[21]||(s[21]=e("span",{class:"label"},"Reward rate:",-1)),e("span",Xs,i(l.reward_rate)+" "+i(l.reward_type=="FIX"?"â‚½":"%"),1)]),e("div",Gs,[s[22]||(s[22]=e("span",{class:"label"},"Reward type:",-1)),e("span",Ws,i(l.reward_type),1)])]),e("div",Hs,[e("button",{onClick:k(w=>ee(l),["stop"]),class:"btn-action"}," âœï¸ Edit ",8,Ys)])]))),128))]))])):y("",!0),f.value==="documents"?(a(),n("div",Js,[e("div",Ks,[s[23]||(s[23]=e("h2",null,"Docs",-1)),e("button",{onClick:s[3]||(s[3]=l=>M.value=!0),class:"btn-primary"}," ðŸ“Ž Upload doc ")]),e("div",Zs,[g.value.length===0?(a(),n("div",et," ðŸ“„ There are no documents yet ")):y("",!0),(a(!0),n(P,null,z(g.value,l=>(a(),n("div",{key:l.id,class:"document-card"},[s[25]||(s[25]=e("div",{class:"document-icon"}," ðŸ“„ ",-1)),e("div",st,[e("div",tt,[e("h4",ot,i(l.title),1)]),e("div",lt,[e("span",at,[s[24]||(s[24]=e("span",{class:"label"},"Ð Ð°Ð·Ð¼ÐµÑ€:",-1)),e("span",nt,i(q(l.content.length)),1)])])]),e("div",it,[e("button",{onClick:w=>t(l),class:"btn-action"}," â¬‡ï¸ Download ",8,rt)])]))),128))])])):y("",!0),f.value==="qr_verify"?(a(),n("div",dt,[s[32]||(s[32]=e("div",{class:"section-header"},[e("h2",null,"Checking QR codes"),e("p",{class:"section-description"}," Upload the QR code to obtain receipt information ")],-1)),e("div",ct,[e("div",ut,[s[26]||(s[26]=e("label",null,[U("If you need to filter the receipt data, specify the filter in the format "),e("b",null,"jsonpath")],-1)),B(e("input",{"onUpdate:modelValue":s[4]||(s[4]=l=>N.value=l),class:"form-input",placeholder:"$.items.name"},null,512),[[A,N.value]])]),e("div",{onDragover:s[5]||(s[5]=k(l=>R.value=!0,["prevent"])),onDragleave:s[6]||(s[6]=l=>R.value=!1),onDrop:k(Q,["prevent"]),class:D(["upload-area",{"drag-over":R.value,"has-file":m.value}]),onClick:r},[m.value?(a(),n("div",pt,[s[28]||(s[28]=e("div",{class:"file-icon"},"ðŸ“·",-1)),e("div",_t,[e("p",ft,i(m.value.name),1),e("p",mt,i(q(m.value.size)),1)]),e("button",{onClick:k(V,["stop"]),class:"remove-file"},"ðŸ—‘ï¸")])):(a(),n("div",vt,[...s[27]||(s[27]=[e("div",{class:"upload-icon"},"ðŸ”",-1),e("p",null,"Drag and drop the QR code here or click to select",-1),e("p",{class:"upload-hint"},"JPG and PNG are supported (max 1MB)",-1)])])),e("input",{ref_key:"qrFileInput",ref:I,type:"file",accept:"image/*",onChange:h,class:"file-input"},null,544)],34),e("div",ht,[e("button",{onClick:fe,disabled:!m.value||_.value,class:D(["verify-btn",{loading:_.value}])},[_.value?(a(),n("span",gt,"â³ Check...")):(a(),n("span",bt,"ðŸ” Check the QR code"))],10,yt)]),C.value?(a(),n("div",kt,[s[31]||(s[31]=e("div",{class:"result-header"},[e("h3",null,"Result")],-1)),C.value.error?(a(),n("div",Rt,[s[30]||(s[30]=e("div",{class:"error-icon"},"âš ï¸",-1)),e("p",Ct,i(C.value.description),1)])):(a(),n("div",$t,[e("div",wt,[s[29]||(s[29]=e("h4",null,"Receipt data",-1)),e("code",null,i(C.value),1)])]))])):y("",!0)])])):y("",!0)])]),$.value?(a(),n("div",{key:0,class:"modal-overlay",onClick:k(x,["self"])},[e("div",Dt,[e("div",Ft,[e("h3",null,i(F.value?"Edit store":"Add store"),1),e("button",{onClick:x,class:"modal-close"},"Ã—")]),e("div",Qt,[e("div",Mt,[s[33]||(s[33]=e("label",null,"Store name *",-1)),B(e("input",{"onUpdate:modelValue":s[7]||(s[7]=l=>v.name=l),type:"text",class:"form-input",placeholder:"Store name"},null,512),[[A,v.name]])]),e("div",St,[s[34]||(s[34]=e("label",null,"Address *",-1)),B(e("textarea",{"onUpdate:modelValue":s[8]||(s[8]=l=>v.address=l),class:"form-textarea",rows:"2",placeholder:"Address of the store"},null,512),[[A,v.address]])]),e("div",xt,[e("div",Bt,[s[35]||(s[35]=e("label",null,"Inn *",-1)),B(e("input",{"onUpdate:modelValue":s[9]||(s[9]=l=>v.inn=l),class:"form-input",placeholder:"775598987121"},null,512),[[A,v.inn]])]),e("div",Ut,[s[36]||(s[36]=e("label",null,"Reward rate *",-1)),B(e("input",{"onUpdate:modelValue":s[10]||(s[10]=l=>v.reward_rate=l),class:"form-input"},null,512),[[A,v.reward_rate]])])]),e("div",It,[s[38]||(s[38]=e("label",null,"Reward type *",-1)),B(e("select",{"onUpdate:modelValue":s[11]||(s[11]=l=>v.reward_type=l),class:"form-input"},[...s[37]||(s[37]=[e("option",{value:"FIX"},"FIX",-1),e("option",{value:"PERCENT"},"Percent",-1)])],512),[[_e,v.reward_type]])]),e("div",Tt,[e("button",{onClick:x,class:"btn-cancel"},"Cancel"),e("button",{onClick:Z,class:"btn-confirm"},i(F.value?"Save":"Add"),1)])])])])):y("",!0),M.value?(a(),n("div",{key:1,class:"modal-overlay",onClick:k(E,["self"])},[e("div",qt,[e("div",{class:"modal-header"},[s[39]||(s[39]=e("h3",null,"Upload document",-1)),e("button",{onClick:E,class:"modal-close"},"Ã—")]),e("div",Pt,[e("div",zt,[s[40]||(s[40]=e("label",null,"title *",-1)),B(e("input",{"onUpdate:modelValue":s[12]||(s[12]=l=>S.title=l),type:"text",class:"form-input",placeholder:"Q4 2023 Financial Report"},null,512),[[A,S.title]])]),e("div",Lt,[s[43]||(s[43]=e("label",null,"file *",-1)),e("div",{onDragover:s[13]||(s[13]=k(l=>L.value=!0,["prevent"])),onDragleave:s[14]||(s[14]=l=>L.value=!1),onDrop:k(te,["prevent"]),class:D(["document-upload-area",{"drag-over":L.value,"has-file":b.value}]),onClick:se},[b.value?(a(),n("div",Vt,[s[42]||(s[42]=e("div",{class:"file-icon"},"ðŸ“„",-1)),e("div",At,[e("p",Ot,i(b.value.name),1),e("p",jt,i(q(b.value.size)),1)]),e("button",{onClick:k(Y,["stop"]),class:"remove-file"},"ðŸ—‘ï¸")])):(a(),n("div",Et,[...s[41]||(s[41]=[e("div",{class:"upload-icon"},"ðŸ“Ž",-1),e("p",null,"Drag and drop a file here or click to select",-1),e("p",{class:"upload-hint"},"PDF, DOC, DOCX, XLS, XLSX (Ð¼Ð°ÐºÑ. 1MB)",-1)])])),e("input",{ref_key:"documentFileInput",ref:T,type:"file",onChange:H,class:"file-input"},null,544)],34)]),e("div",Nt,[e("button",{onClick:E,class:"btn-cancel"},"Cancel"),e("button",{onClick:o,disabled:!S.title||!b.value,class:"btn-confirm"}," ðŸ“Ž Upload ",8,Xt)])])])])):y("",!0)]))}},Wt=oe(Gt,[["__scopeId","data-v-eb19b931"]]);const Ht={class:"home"},Yt={key:0},Jt={class:"action-buttons"},Kt={key:1},Zt={__name:"Home",setup(ne){const j=async()=>{if(ve)try{await he.getUserInfo()}catch(f){ae.value="",console.error("User loading error:",f)}};return le(async()=>{await j()}),(f,p)=>{const g=me("router-link");return a(),n("div",Ht,[G(ve)?(a(),n("div",Kt,[G(pe)==="buyer"?(a(),ue(gs,{key:0})):G(pe)==="partner"?(a(),ue(Wt,{key:1})):y("",!0)])):(a(),n("div",Yt,[p[2]||(p[2]=e("h1",null,"Welcome!",-1)),p[3]||(p[3]=e("p",null,"To access the service you need to log in",-1)),e("div",Jt,[de(g,{to:"/login",class:"btn primary"},{default:ce(()=>[...p[0]||(p[0]=[U("Login",-1)])]),_:1}),de(g,{to:"/register",class:"btn secondary"},{default:ce(()=>[...p[1]||(p[1]=[U("Register",-1)])]),_:1})])]))])}}},to=oe(Zt,[["__scopeId","data-v-8a62c9e9"]]);export{to as default};
