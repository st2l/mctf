const n=async(r,t="GET",e)=>{const a={method:t};return(t!="GET"||t!=="DELETE")&&(a.headers={"Content-Type":"application/json"},a.body=JSON.stringify(e)),(await fetch(`/api${r}`,a)).json()},s=async(r,t,e="POST",a=null)=>{const o=new FormData;return o.append("qr",t),a&&o.append("filter",a),(await fetch(`/api${r}`,{method:e,body:o})).json()},i=async(r,t)=>{const e=new FormData;return e.append("title",t),e.append("doc",r),e.append("filename",r.name),(await fetch("/api/partner/internal_doc",{method:"POST",body:e})).json()},p={async login(r,t){const e=await n(`/auth/${t}/login`,"POST",r);if(e.error)throw new Error(e.description);return{username:e.username,type:t}},async register(r,t){const e=await n(`/auth/${t}/register`,"POST",r);if(e.error)throw new Error(e.description)},async getUserInfo(){const r=await n("/auth/me");if(r.error)throw new Error(r.description)}},u={async getReceipts(){return await n("/buyer/receipts")},async uploadQR(r){const t=await s("/buyer/qr",r);if(t.error)throw new Error(t.description);return t},async updateQR(r,t){const e=await s(`/buyer/qr/${r}`,t,"PUT");if(e.error)throw new Error(e.description);return e},async getFailedQRs(){return await n("/buyer/failed_qrs")}},w={async getStores(){return await n("/partner/stores")},async addStore(r){const t=await n("/partner/store","POST",r);if(t.error)throw new Error(t.description);return t},async updateStore(r,t){const e=await n(`/partner/store/${r}`,"PUT",t);if(e.error)throw new Error(e.description);return e},async getDocuments(){return await n("/partner/internal_docs")},async uploadDocument(r){return await i(r.file,r.title)},async checkQR(r,t){return s("/partner/tools/check_qr",r,"POST",t)}};export{p as a,u as b,w as p};
